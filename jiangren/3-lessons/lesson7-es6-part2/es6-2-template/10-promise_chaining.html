<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const step1 = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('step1 success');
          }, 1000);
        });
      };

      const step2 = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('step2 success');
          }, 1000);
        });
      };

      const step3 = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('step3 success');
          }, 1000);
        });
      };

      const step4 = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('step4 success');
          }, 1000);
        });
      };

      // 方法1: Promise链式调用
      console.log('=== Promise链式调用 ===');
      step1()
        .then(res => {
          console.log(res);
          return step2(); // return promise of step2
        })
        .then(res => {
          console.log(res);
          return step3();
        })
        .then(res => {
          console.log(res);
          return step4();
        })
        .then(res => {
          console.log(res);
          console.log('Promise链式调用完成！');
        })
        .catch(err => {
          console.log('Promise链式调用出错:', err);
        });

      // 方法2: async/await语法
      console.log('=== async/await语法 ===');
      async function executeSteps() {
        try {
          const res1 = await step1();
          console.log(res1);

          const res2 = await step2();
          console.log(res2);

          const res3 = await step3();
          console.log(res3);

          const res4 = await step4();
          console.log(res4);

          console.log('async/await执行完成！');
        } catch (err) {
          console.log('async/await执行出错:', err);
        }
      }

      // 调用执行函数
      executeSteps();
    </script>
  </body>
</html>
